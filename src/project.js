window.__require=function e(n,t,i){function a(s,o){if(!t[s]){if(!n[s]){var r=s.split("/");if(r=r[r.length-1],!n[r]){var u="function"==typeof __require&&__require;if(!o&&u)return u(r,!0);if(c)return c(r,!0);throw new Error("Cannot find module '"+s+"'")}s=r}var l=t[s]={exports:{}};n[s][0].call(l.exports,function(e){return a(n[s][1][e]||e)},l,l.exports,e,n,t,i)}return t[s].exports}for(var c="function"==typeof __require&&__require,s=0;s<i.length;s++)a(i[s]);return a}({Building:[function(e,n,t){"use strict";cc._RF.push(n,"894e4Mf1IRO1pkrzFSlIO5P","Building"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){var e;function n(){var e,n=[{id:0,name:"building1",money:35,carbon:10},{id:1,name:"building2",money:65,carbon:120}];return{get current(){return e},set current(t){e=n[t]},get name(){return e.name},get money(){return e.money},get carbon(){return e.carbon}}}return{getInstance:function(){return e||(e=n()),e}}}().getInstance();t.default=i,n.exports=t.default,cc._RF.pop()},{}],Event:[function(e,n,t){"use strict";cc._RF.push(n,"f0b2e25cWdPv45MNgFC/t4Y","Event"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){var e;function n(){var e,n=null;console.log(n);return cc.loader.loadRes("json/RandomEvent.json",function(e,t){e?console.log(e):(n=t.json,console.log(n))}),{get currentIndex(){return e},get currentEvent(){return n[e]},get length(){return n.length},randomEvent:function(){if(n.length<1)return"No Events Anymore";e=this.random(0,n.length-1),cc.log(e);var t=n[e];return cc.log(n.length),t},random:function(e,n){return Math.floor(Math.random()*(n-e)+e)}}}return{getInstance:function(){return e||(e=n()),e}}}().getInstance();t.default=i,n.exports=t.default,cc._RF.pop()},{}],GLOBAL:[function(e,n,t){"use strict";cc._RF.push(n,"7ca2cFaS/tHjLG7cGx5FWig","GLOBAL"),window.PATHS={START_PAGE:"Canvas/StartPage",MAIN_PAGE:"Canvas/MainPage",GROUND_PANEL:"Canvas/MainPage/ui_pic_map_bg/GroundPanel",BUILDING_PANEL:"Canvas/MainPage/ui_pic_map_bg/BuildingPanel",BUILD_PANEL:"Canvas/MainPage/ui_pic_map_bg/BuildPanel",RESULT_PANEL:"Canvas/MainPage/ui_pic_map_bg/ResultPanel",EVENT_PANEL:"Canvas/MainPage/ui_pic_map_bg/EventPanel",E_BTN_YES:"Canvas/MainPage/ui_pic_map_bg/EventPanel/btn_Yes",E_BTN_YES_LB:"Canvas/MainPage/ui_pic_map_bg/EventPanel/btn_Yes/Label",E_BTN_NO:"Canvas/MainPage/ui_pic_map_bg/EventPanel/btn_No",E_BTN_NO_LB:"Canvas/MainPage/ui_pic_map_bg/EventPanel/btn_No/Label",EVENT_TITLE:"Canvas/MainPage/ui_pic_map_bg/EventPanel/ui_question_title_bg/title",EVENT_CONTENT:"Canvas/MainPage/ui_pic_map_bg/EventPanel/content",EVENT_CHARACTER:"Canvas/MainPage/ui_pic_map_bg/EventPanel/ui_icon_headshot_bg/ui_icon_headshot01",QUESTION_PANEL:"Canvas/MainPage/ui_pic_map_bg/QuestionPanel",Q_BTN_YES:"Canvas/MainPage/ui_pic_map_bg/QuestionPanel/btn_Yes",Q_BTN_YES_LB:"Canvas/MainPage/ui_pic_map_bg/QuestionPanel/btn_Yes/Label",Q_BTN_NO:"Canvas/MainPage/ui_pic_map_bg/QuestionPanel/btn_No",Q_BTN_NO_LB:"Canvas/MainPage/ui_pic_map_bg/QuestionPanel/btn_No/Label",QUESTION_TITLE:"Canvas/MainPage/ui_pic_map_bg/QuestionPanel/ui_question_title_bg/title",QUESTION_CONTENT:"Canvas/MainPage/ui_pic_map_bg/QuestionPanel/content",QUESTION_CHARACTER:"Canvas/MainPage/ui_pic_map_bg/QuestionPanel/ui_icon_headshot_bg/ui_icon_headshot01",LBL_FINANCIAL:"Canvas/MainPage/ui_pic_map_bg/ui_frame_main_bg/financial/financial_label",LBL_POPULATION:"Canvas/MainPage/ui_pic_map_bg/ui_frame_main_bg/population/population_label",LBL_ENVIRONMENT:"Canvas/MainPage/ui_pic_map_bg/ui_frame_main_bg/environment/environment_label",LBL_MONTH:"Canvas/MainPage/ui_pic_map_bg/ui_frame_main_bg/lbl_month",LBL_YEAR:"Canvas/MainPage/ui_pic_map_bg/ui_frame_main_bg/lbl_year",LBL_LEAD_YEARS:"Canvas/MainPage/ui_pic_map_bg/ResultPanel/lbl_lead_years",FILL_BG_FINANCIAL:"Canvas/MainPage/ui_pic_map_bg/ui_frame_main_bg/financial/bg_financial/fill_bg_financial",FILL_BG_SOCIETY:"Canvas/MainPage/ui_pic_map_bg/ui_frame_main_bg/population/bg_society/fill_bg_society",FILL_BG_ENVIRONMENT:"Canvas/MainPage/ui_pic_map_bg/ui_frame_main_bg/environment/bg_environment/fill_bg_environment",BTN_BUILD_WITH_MONEY:"Canvas/MainPage/ui_pic_map_bg/BuildPanel/building1/build_with_money",BTN_BUILD_FREE:"Canvas/MainPage/ui_pic_map_bg/BuildPanel/building2/build_free"},window.TURN={Q:"question",E:"event"},cc._RF.pop()},{}],GameManager:[function(e,n,t){"use strict";cc._RF.push(n,"49552Wb4HtEEIBgJfOWAjIr","GameManager"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){var e;function n(){cc.log("GameManager.init()");var e=3e3,n=3e3,t=3e3,i=0,a=0,c=["0","1","2","3","4","5","6","7","8","9","10","11"],s=!1,o=TURN.Q,r=o,u=-1;return{get maxEnvironment(){return 5e3},get maxFinancial(){return 5e3},get maxSociety(){return 5e3},get environment(){return n},get financial(){return e},get society(){return t},get month(){return c[a]},get mthCounter(){return a},set mthCounter(e){a=e},get yrCounter(){return i},set yrCounter(e){i=e},get gameOver(){return s},set gameOver(e){s=e},get turn(){return o},set turn(e){o=e},get previousEventIndex(){return u},set previousEventIndex(e){u=e},resetData:function(){n=3e3,e=3e3,t=3e3,i=0,a=0,s=!1},updateEFS:function(i,a){var c,s,o;cc.log(i),a?(c=this.calculateEnvironmentValue(i.Enviroment1),o=this.calculateFinancialValue(i.Financial1),s=this.calculateSocietyValue(i.Society1)):(c=this.calculateEnvironmentValue(i.Enviroment2),o=this.calculateFinancialValue(i.Financial2),s=this.calculateSocietyValue(i.Society2)),cc.log(n+", "+e+", "+t),cc.log(c+", "+o+", "+s),n+=c,e+=o,t+=s,cc.log(n+", "+e+", "+t),this.checkGameOver()},buildWithMoney:function(){e-=300,this.checkGameOver()},checkGameOver:function(){(n<=10||t<=10||e<=10)&&(s=!0)},checkEFSLimits:function(){n<=5e3&&(n=5e3),e<=5e3&&(e=5e3),t<=5e3&&(t=5e3)},calculateSocietyValue:function(e){return cc.log("calculateSocietyValue(",e,")"),parseInt(e)},calculateFinancialValue:function(e){return cc.log("calculateFinancialValue(",e,")"),parseInt(e)},calculateEnvironmentValue:function(e){return cc.log("calculateEnvironmentValue(",e,")"),parseInt(e)},newEventHappen:function(){return r!=o}}}return{getInstance:function(){return e||(e=n()),e}}}().getInstance();t.default=i,n.exports=t.default,cc._RF.pop()},{}],Question:[function(e,n,t){"use strict";cc._RF.push(n,"6af0dP9gAlF8rz+BIE/9nwd","Question"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){var e;function n(){var e;cc.log("Question.init()");var n=null;console.log(n);return cc.loader.loadRes("json/RandomQuestion.json",function(e,t){e?console.log(e):(n=t.json,console.log(n))}),{get currentIndex(){return e},get currentQuestion(){return n[e]},get length(){return n.length},randomQuestion:function(){if(n.length<1)return"No Questions Anymore";var t=this.random(0,n.length-1);e=t;var i=n[t];return console.log("Question Length : "+n.length),console.log("Index : "+t),i},random:function(e,n){return Math.floor(Math.random()*(n-e)+e)}}}return{getInstance:function(){return e||(e=n()),e}}}().getInstance();t.default=i,n.exports=t.default,cc._RF.pop()},{}],Round:[function(e,n,t){"use strict";cc._RF.push(n,"9596c5nWexPOZXuY1RBxv43","Round"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=function(){var e;function n(){var e=1,n=10;return{get currentRound(){return e},set currentRound(n){e=n},get currentPercentage(){return n},set currentPercentage(e){n=e},updateRound:function(){e++,console.log("Current Round : "+e),this.calculatePercentage()},calculatePercentage:function(){n+=10,e%7==0&&(n=0)},resetData:function(){console.log("Reset Data..."),e=1,n=10}}}return{getInstance:function(){return e||(e=n()),e}}}().getInstance();t.default=i,n.exports=t.default,cc._RF.pop()},{}],UIManager:[function(e,n,t){"use strict";cc._RF.push(n,"48e49X5RN5NE4tTFg16ccbA","UIManager");var i=e("./models/GameManager.js"),a=e("./models/Question.js"),c=e("./models/Event.js"),s=e("./models/Round.js");cc.Class({extends:cc.Component,properties:{grassLands:[cc.Node],buildings:[cc.Prefab]},initComponents:function(){cc.log("UIManager.initComponents()"),this.startPage=cc.find(PATHS.START_PAGE),this.mainPage=cc.find(PATHS.MAIN_PAGE),this.buildingPanel=cc.find(PATHS.BUILDING_PANEL),this.buildPanel=cc.find(PATHS.BUILD_PANEL),this.questionPanel=cc.find(PATHS.QUESTION_PANEL),this.eventPanel=cc.find(PATHS.EVENT_PANEL),this.resultPanel=cc.find(PATHS.RESULT_PANEL),this.fillBgSociety=cc.find(PATHS.FILL_BG_SOCIETY).getComponent(cc.Sprite),this.fillBgFinancial=cc.find(PATHS.FILL_BG_FINANCIAL).getComponent(cc.Sprite),this.fillBgEnvironment=cc.find(PATHS.FILL_BG_ENVIRONMENT).getComponent(cc.Sprite),this.lblMonth=cc.find(PATHS.LBL_MONTH).getComponent(cc.Label),this.lblYear=cc.find(PATHS.LBL_YEAR).getComponent(cc.Label),this.questionTitle=cc.find(PATHS.QUESTION_TITLE).getComponent(cc.Label),this.questionContent=cc.find(PATHS.QUESTION_CONTENT).getComponent(cc.Label),this.questionCharacter=cc.find(PATHS.QUESTION_CHARACTER).getComponent(cc.Sprite),this.eventTitle=cc.find(PATHS.EVENT_TITLE).getComponent(cc.Label),this.eventContent=cc.find(PATHS.EVENT_CONTENT).getComponent(cc.Label),this.eventCharacter=cc.find(PATHS.EVENT_CHARACTER).getComponent(cc.Sprite),this.lblLeadYears=cc.find(PATHS.LBL_LEAD_YEARS).getComponent(cc.Label),this.btnBuildWithMoney=cc.find(PATHS.BTN_BUILD_WITH_MONEY),this.btnBuildWithMoney.on("click",this.buildWithMoney,this),this.btnBuildFree=cc.find(PATHS.BTN_BUILD_FREE),this.btnBuildFree.on("click",this.buildFree,this),this.btnQuestionYes=cc.find(PATHS.Q_BTN_YES),this.btnQuestionYes.on("click",this.clickedQuestionYes,this),this.btnQuestionYeslb=cc.find(PATHS.Q_BTN_YES_LB).getComponent(cc.Label),this.btnQuestionNo=cc.find(PATHS.Q_BTN_NO),this.btnQuestionNo.on("click",this.clickedQuestionNo,this),this.btnQuestionNolb=cc.find(PATHS.Q_BTN_NO_LB).getComponent(cc.Label),this.btnEventYes=cc.find(PATHS.E_BTN_YES),this.btnEventYes.on("click",this.clickedEventYes,this),this.btnEventYeslb=cc.find(PATHS.E_BTN_YES_LB).getComponent(cc.Label),this.btnEventNo=cc.find(PATHS.E_BTN_NO),this.btnEventNo.on("click",this.clickedEventNo,this),this.btnEventNolb=cc.find(PATHS.E_BTN_NO_LB).getComponent(cc.Label)},initData:function(){this.timer=0},initEmptyLands:function(){this.emptyGrassLands=new Array(this.grassLands.length);for(var e=0;e<this.grassLands.length;e++)this.emptyGrassLands[e]=!0},onLoad:function(){this.initComponents(),this.initData(),this.initEmptyLands()},start:function(){this.restartGame()},goToGame:function(){this.startPage.active=!1,this.mainPage.active=!0},restartGame:function(){this.deleteAllBuildings(),this.startPage.active=!0,this.mainPage.active=!1,this.closeAllPanels(),this.buildPanel.active=!0,i.resetData(),s.resetData(),this.updateFillValuesEFS(),this.lblMonth.string=i.month,this.lblYear.string=i.yrCounter,this.showTimer()},updateFillValuesEFS:function(){this.fillBgEnvironment.fillRange=i.environment/i.maxEnvironment,this.fillBgFinancial.fillRange=i.financial/i.maxFinancial,this.fillBgSociety.fillRange=i.society/i.maxSociety},createHouse:function(e){var n=this.getRandomLandPosition();if(-1==n)i.gameOver=!0,this.gameOver();else{var t=this.grassLands[n].position,a=cc.instantiate(this.buildings[e]);a.position=t,a.setPosition(a.getPosition().x,a.getPosition().y+20),this.buildingPanel.addChild(a)}},getRandomLandPosition:function(){var e=-1;if(this.emptyGrassLands.length>0){var n=this.emptyGrassLands.length;e=this.random(0,n-1),this.emptyGrassLands.splice(e,1)}return e},showQuestionPanel:function(){if(!this.isExistShowingPanel()){cc.log("showQuestionPanel()"),this.currentQuestion=a.randomQuestion(),cc.log(this.currentQuestion),this.questionTitle.string=this.currentQuestion.QuestionTitle,this.questionContent.string=this.currentQuestion.QuestionContent,iconname="images/"+this.currentQuestion.Character;var e=this;cc.loader.loadRes(iconname,cc.SpriteFrame,function(n,t){e.questionCharacter.spriteFrame=t}),this.btnQuestionYeslb.string=this.currentQuestion.YesText,this.btnQuestionNolb.string=this.currentQuestion.NoText,this.questionPanel.active=!0}},showEventPanel:function(){if(cc.log("showEventPanel()"),!this.isExistShowingPanel()){this.currentEvent=c.randomEvent(),cc.log(this.currentEvent),this.eventTitle.string=this.currentEvent.QuestionTitle,this.eventContent.string=this.currentEvent.QuestionContent,iconname="images/"+this.currentEvent.Character,cc.log(iconname);var e=this;cc.loader.loadRes(iconname,cc.SpriteFrame,function(n,t){e.questionCharacter.spriteFrame=t}),this.btnEventYeslb.string=this.currentEvent.YesText,this.btnEventNolb.string=this.currentEvent.NoText,this.eventPanel.active=!0}},showResultPanel:function(){var e="";e+=i.yrCounter,i.yrCounter>1?e+=" years ":e+=" year ",e+=i.mthCounter+1,i.mthCounter+1>1?e+=" months":e+=" month",this.lblLeadYears.string=e,this.resultPanel.active=!0},clickedQuestionYes:function(){this.questionPanel.active=!1,i.updateEFS(a.currentQuestion,!0),this.updateFillValuesEFS(),i.gameOver&&this.gameOver()},clickedQuestionNo:function(){this.questionPanel.active=!1,i.updateEFS(a.currentQuestion,!1),this.updateFillValuesEFS(),i.gameOver&&this.gameOver()},clickedEventYes:function(){this.eventPanel.active=!1,i.updateEFS(c.currentEvent,!0),this.updateFillValuesEFS(),i.gameOver&&this.gameOver()},clickedEventNo:function(){this.eventPanel.active=!1,i.updateEFS(c.currentEvent,!1),this.updateFillValuesEFS(),i.gameOver&&this.gameOver()},buildWithMoney:function(){this.buildPanel.active=!1,i.buildWithMoney(),this.updateFillValuesEFS(),i.gameOver?this.gameOver():this.createHouse(0)},buildFree:function(){this.buildPanel.active=!1,this.createHouse(1)},updateYearAndMonth:function(){i.mthCounter++,i.mthCounter>11&&(i.mthCounter=0,i.yrCounter++,this.lblYear.string=i.yrCounter),this.lblMonth.string=i.month},random:function(e,n){var t=Math.random()*(n-e)+e;return Math.round(t)},showTimer:function(){var e=this,n=setInterval(function(){if(i.gameOver)clearInterval(n);else{if(e.isExistShowingPanel())return;e.timer++,60==e.timer&&(e.timer=0),e.timer%3==0&&(e.updateYearAndMonth(),s.updateRound()),e.emitRandomEAndQ(e.timer)}},1e3)},checkNextEventHappened:function(){i.newEventHappen()||-1==i.previousEventIndex?void 0!=this.currentEvent&&(i.previousEventIndex=a.currentIndex):i.updateEFS(c.currentEvent,!0)},emitRandomEAndQ:function(e){this.random(0,100)<=s.currentPercentage&&(i.turn==TURN.Q?(this.showQuestionPanel(),i.turn=TURN.E):(this.showEventPanel(),i.turn=TURN.Q))},closeAllPanels:function(){this.buildPanel.active=!1,this.questionPanel.active=!1,this.eventPanel.active=!1,this.resultPanel.active=!1},gameOver:function(){this.closeAllPanels(),this.showResultPanel()},deleteAllBuildings:function(){for(var e=this.buildingPanel.children,n=0;n<e.length;n++)e[n].destroy()},isExistShowingPanel:function(){var e=!1;return(this.buildPanel.active||i.gameOver||this.questionPanel.active||this.eventPanel.active)&&(e=!0),e}}),cc._RF.pop()},{"./models/Event.js":"Event","./models/GameManager.js":"GameManager","./models/Question.js":"Question","./models/Round.js":"Round"}],"use_v2.1-2.2.1_cc.Toggle_event":[function(e,n,t){"use strict";cc._RF.push(n,"cfd8fBeIblMz79yGFZ0t5KK","use_v2.1-2.2.1_cc.Toggle_event"),cc.Toggle&&(cc.Toggle._triggerEventInScript_isChecked=!0),cc._RF.pop()},{}]},{},["use_v2.1-2.2.1_cc.Toggle_event","GLOBAL","UIManager","Building","Event","GameManager","Question","Round"]);